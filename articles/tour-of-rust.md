---
title: "Tour of Rust ç¬¬1ç« (åŸºç¤)ã¾ã¨ã‚"
emoji: "ğŸ•Œ"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["rust"]
published: true
---

ã“ã“ã§ã®ã¾ã¨ã‚

```
å¤‰æ•°
ã‚·ãƒ£ãƒ‰ãƒ¼ã‚¤ãƒ³ã‚°ã¨ã¯
å¤‰æ•°ã®å¤‰æ›´
å‹ã«ã¤ã„ã¦
åŸºæœ¬å‹ã®å¤‰æ›
å®šæ•°
é…åˆ—
é–¢æ•°
è¤‡æ•°ã®æˆ»ã‚Šå€¤
ç©ºã®æˆ»ã‚Šå€¤
```

## å¤‰æ•°

ãƒ»let ã§å®£è¨€ã™ã‚‹
ãƒ»å€¤ã‚’å‰²ã‚Šå½“ã¦ã‚‹éš›ã€Rust ã¯ 99%ã®ã‚±ãƒ¼ã‚¹ã§å¤‰æ•°ã®å‹ã‚’æ¨è«–ã§ãã‚‹ã€‚ã§ããªã„å ´åˆã€å¤‰æ•°å®£è¨€ã«å‹ã‚’è¿½åŠ ã§ãã‚‹ã€‚
ãƒ»å¤‰æ•°åã«ã¯ã‚¹ãƒãƒ¼ã‚¯ã‚±ãƒ¼ã‚¹(snake_case)ã‚’ä½¿ç”¨ã™ã‚‹

### ã‚·ãƒ£ãƒ‰ãƒ¼ã‚¤ãƒ³ã‚°ã¨ã¯

ãƒ»åŒã˜å¤‰æ•°åã«è¤‡æ•°å›å‰²ã‚Šå½“ã¦ã‚‰ã‚Œã‚‹ã“ã¨ã€‚

```
fn main() {
  let x = 13;
  prinln!("{}", x);

  // x ã®å‹ã‚’æŒ‡å®š
  let x: f64 = 3.14159;
  println!("{}", x);

  // å®£è¨€ã®å¾Œã§åˆæœŸåŒ–: åŸºæœ¬ä½¿ã‚ãªã„
  let x;
  x = 0;
  println!("{}", x);
}

=> 13 3.141659 0
```

### å¤‰æ•°ã®å¤‰æ›´

Rust ã®å¤‰æ•°ã®å¤‰æ›´ã¯ã€ï¼’ç¨®é¡ã«åˆ†é¡ã•ã‚Œã‚‹ã€‚
ãƒ»mutable: read & write
ãƒ»immutable: readonly

mutable ã«ã™ã‚‹å ´åˆã€

```
let mut x = 42;
```

ã¨ã€mut ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’ä½¿ã†

## å‹ã«ã¤ã„ã¦

```
fn main() {
  let x = 12; // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ i32
  let a = 12u8;
  let b = 4.3; // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ f64
  let c = 4.3f32;
  let bv = true;
  let t = (13, false);
  let sentence = "hello world!";
  println!(
    "{} {} {} {} {} {} {} {}",
    x, a, b, c, bv, t.0, t.1, sentence
  );
}

=> 12 12 4.3 4.3 true 13 false hello world!
```

> u8, u32, u64, u128 => ç¬¦å·ãªã—æ•´æ•°å‹
> i8, i32, i64, i128 => ç¬¦å·ä»˜ãæ•´æ•°å‹
> f32, f64 => æµ®å‹•å°æ•°ç‚¹æ•°å‹
> usize, isize => ãƒã‚¤ãƒ³ã‚¿ã‚µã‚¤ã‚ºæ•´æ•°å‹ï¼ˆãƒ¡ãƒ¢ãƒªå†…ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã¨ã‚µã‚¤ã‚ºã‚’è¡¨ã™ï¼‰
> é…åˆ—å‹ï¼ˆã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ™‚ã«é•·ã•ãŒæ±ºã¾ã‚‹åŒã˜è¦ç´ ã®ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ï¼‰
> ã‚¹ãƒ©ã‚¤ã‚¹å‹ï¼ˆå®Ÿè¡Œæ™‚ã«é•·ã•ãŒæ±ºã¾ã‚‹åŒã˜è¦ç´ ã®ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ï¼‰
> str(å®Ÿè¡Œæ™‚ã«é•·ã•ãŒæ±ºã¾ã‚‹ãƒ†ã‚­ã‚¹ãƒˆ)

### åŸºæœ¬å‹ã®å¤‰æ›

ãƒ»æ•°å€¤å‹ã‚’æ‰±ã†ã¨ãã€å‹ã‚’æ˜ç¤ºã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚
ãƒ»ä¾‹ãˆã°ã€u8, u32 ã‚’æ··ãœã‚‹ã¨ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹ã€‚
ãƒ»as ã‚’ã¤ã‘ã‚‹ã“ã¨ã§ã€å‹å¤‰æ›ãŒã§ãã‚‹ã€‚

```
fn main() {
    let a = 13u8;
    let b = 7u32;
    let c = a + b; // æœ¬æ¥ã¯ã€a ã‹ b ã‚’å‹å¤‰æ›ã™ã‚‹å¿…è¦ã‚ã‚Šã€‚
    println!("{}", c);

    let t = true;
    println!("{}", t as u8);
}
=> Compiling playground v0.0.1 (/playground)
error[E0308]: mismatched types
 --> src/main.rs:4:17
  |
4 |     let c = a + b;
  |                 ^ expected `u8`, found `u32`

error[E0277]: cannot add `u32` to `u8`
 --> src/main.rs:4:15
  |
4 |     let c = a + b;
  |               ^ no implementation for `u8 + u32`
  |
  = help: the trait `Add<u32>` is not implemented for `u8`

Some errors have detailed explanations: E0277, E0308.
For more information about an error, try `rustc --explain E0277`.
error: could not compile `playground` due to 2 previous errors
```

ãªã®ã§ã€

```
let c = a as u32 + b;
```

ã¨å‹å¤‰æ›ã™ã‚‹ã¨ã€ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ãŒé€šã‚‹ã€‚

## å®šæ•°

ãƒ»æ˜ç¤ºçš„ãªå‹æŒ‡å®šãŒå¿…è¦
ãƒ»å¤§æ–‡å­—ã®ã‚¹ãƒãƒ¼ã‚¯ã‚±ãƒ¼ã‚¹ã‚’ä½¿ç”¨ã™ã‚‹

```
const PI: f32 = 3.14159;
fn main() {
  println!(
    "ã‚¼ãƒ­ã‹ã‚‰Apple {} ã‚’ä½œã‚‹ã«ã¯ã€ã¾ãšå®‡å®™ã‚’æƒ³åƒã™ã‚‹ã“ã¨",
    PI
  );
}

```

## é…åˆ—

ãƒ»ãƒ‡ãƒ¼ã‚¿è¦ç´ ãŒå…¨ã¦åŒã˜å‹ã®å›ºå®šé•·ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³
ãƒ»ãƒ‡ãƒ¼ã‚¿å‹ã¯[T;N]ã¨ãªã‚‹ã€‚(T=è¦ç´ ã®å‹ã€N=ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ™‚ã«æ±ºã¾ã‚‹å›ºå®šé•·)

```
fn main() {
  let nums: [i32; 3] = [1, 2, 3];
  println!("{:?}", nums);
  println!("{}", nums[1]);
}
=> [1,2,3] 2
```

## é–¢æ•°

ãƒ»0 å€‹ä»¥ä¸Šã®å¼•æ•°ãŒã‚ã‚‹
ãƒ»é–¢æ•°åã«ã¯ã‚¹ãƒãƒ¼ã‚¯ã‚±ãƒ¼ã‚¹(snake_case)ã‚’ä½¿ã†

```
fn add(x: i32, y:i32) -> i32 {
  return x + y;
}
fn main() {
  println!("{}", add(42, 133));
}
=> 175
```

## è¤‡æ•°ã®æˆ»ã‚Šå€¤

ãƒ»é–¢æ•°ã¯å€¤ã‚’ã‚¿ãƒ—ãƒ«ã§è¿”ã™ã“ã¨ã§è¤‡æ•°ã®å€¤ã‚’è¿”ã›ã‚‹
ãƒ»ã‚¿ãƒ—ãƒ«ã®è¦ç´ ã¯ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ç•ªå·ã§å‚ç…§å¯èƒ½

```
fn swap(x: i32, y:i32) -> (i32, i32) {
  return (y, x);
}
fn main() {
  let result = swap(123, 321);
  println!("{} {}", result.0, result.1);
  let (a, b) = swap(result.0, result.1);
  println!("{} {}", a, b);
}
=> 321 123
=> 123 321
```

## ç©ºã®æˆ»ã‚Šå€¤

ãƒ»é–¢æ•°ã«æˆ»ã‚Šå€¤ã®å‹ãŒæŒ‡å®šã•ã‚Œã¦ã„ãªã„å ´åˆã€unit ã¨å‘¼ã°ã‚Œã‚‹ç©ºã®ã‚¿ãƒ—ãƒ«ã‚’è¿”ã™
ãƒ»ç©ºã®ã‚¿ãƒ—ãƒ«ã¯ () ã¨æ›¸ã

```
fn make_nothing() -> () {
  return ();
}
fn make_nothing2() {
  // ã“ã®é–¢æ•°ã¯æˆ»ã‚Šå€¤ãŒæŒ‡å®šã•ã‚Œãªã„ãŸã‚()ã‚’è¿”ã™
}
fn main() {
  let a = make_nothing()
  let b = make_nothing2()
  println!("aã®å€¤: {:?}", a);
  println!("bã®å€¤: {:?}", b);
}
```
